---
title: "Plotly"
output: 
  html_document:
    code_fold: hide
    toc: false
    toc_float: false
---

```{r}

library(tidyverse)
library(viridis)
library(p8105.datasets)
library(plotly)
```


```{r}
set.seed(1)

data("rest_inspec")

Manhattan_inspec =
rest_inspec %>% 
  select(
    boro, critical_flag, cuisine_description, inspection_date, score, zipcode) %>%
  filter(
    boro == "MANHATTAN"
  ) %>% 
  mutate(cuisine_description = recode(cuisine_description, 
                                      "Latin" = "Latin (Cuban, Dominican, Puerto Rican, South & Central American)")) #%>% sample_n(5000)

```

```{r}

bar_plot = Manhattan_inspec %>%
  filter(zipcode == 10032) %>% 
  drop_na(score) %>%
  mutate(cuisine_description = fct_reorder(cuisine_description, score_mean)) %>%
  group_by(cuisine_description, score) %>%
  summarize(
    score_mean = mean(score)
  ) %>% 
  plot_ly(
    x = ~cuisine_description, y = ~score_mean, type = "bar",
    color = ~cuisine_description, alpha = 0.5)
```

